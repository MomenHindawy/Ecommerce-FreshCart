import{a as $}from"./chunk-S4KLP6ZR.js";import{a as B,m as H}from"./chunk-4HNMJSSN.js";import{a as J}from"./chunk-PH3ODV75.js";import{a as j,c as U,e as G,j as R}from"./chunk-PAXQKUTF.js";import{a as q}from"./chunk-37DFAFBY.js";import{a as N}from"./chunk-KNIRSTFU.js";import{h as z}from"./chunk-N37YHLOP.js";import{m as I}from"./chunk-465SYBKZ.js";import{Ab as C,Bb as l,Ib as d,Jb as v,Kb as M,Lb as W,Mb as A,Na as k,Nb as D,Pb as V,Qb as L,Ra as c,Rb as O,Vb as y,Xb as F,aa as m,bb as _,da as T,hb as S,jb as w,na as p,nb as h,oa as u,ob as E,pb as P,qb as b,rb as n,sb as a,tb as g,wb as f}from"./chunk-DF3O4SLU.js";var K=(i,o)=>o.id,Q=i=>["/details",i],X=()=>[1,2,3,4,5];function Y(i,o){if(i&1){let r=f();n(0,"i",19),C("click",function(){p(r);let e=l().$implicit,s=l();return u(s.addWish(e.id))}),a()}}function Z(i,o){if(i&1){let r=f();n(0,"i",20),C("click",function(){p(r);let e=l().$implicit,s=l();return u(s.deleteProduct(e.id))}),a()}}function ee(i,o){i&1&&(n(0,"span"),g(1,"i",21),a())}function te(i,o){i&1&&(n(0,"span"),g(1,"i",22),a())}function ie(i,o){if(i&1){let r=f();n(0,"div",5)(1,"span",6),S(2,Y,1,0,"i",7)(3,Z,1,0,"i",8),a(),n(4,"div",9)(5,"div",10),g(6,"img",11),n(7,"h3",12),d(8),a(),n(9,"h4",13),d(10),a(),n(11,"div",14)(12,"span",15),d(13),y(14,"currency"),a(),n(15,"div",16),P(16,ee,2,0,"span",null,E),S(18,te,2,0,"span"),n(19,"span",17),d(20),a()()()(),n(21,"button",18),C("click",function(){let e=p(r).$implicit,s=l();return u(s.addCart(e.id))}),d(22,"Add To Cart"),a()()()}if(i&2){let r=o.$implicit,t=l();c(2),h(2,t.wishData().includes(r.id)?-1:2),c(),h(3,t.wishData().includes(r.id)?3:-1),c(2),w("routerLink",O(13,Q,r.id)),c(),w("src",r.imageCover,k)("alt",r.title),c(2),M(" ",r.category.name," "),c(2),v(r.title.split(" ",2).join(" ")),c(3),v(F(14,10,r.price,"GBP")),c(3),b(L(15,X).slice(0,r.ratingsAverage)),c(2),h(18,r.ratingsAverage%1!==0?18:-1),c(2),v(r.ratingsAverage)}}var fe=(()=>{let o=class o{constructor(){this._ProductsService=m(B),this._CategoriesService=m(N),this._CartService=m(q),this._WishlistService=m(J),this._ToastrService=m(H),this.AllCategories=_([]),this.productsList=_([]),this.wordSearch="",this.wishData=_([])}ngOnInit(){this._CategoriesService.getAllCategories().subscribe({next:t=>{this.AllCategories.set(t.data)},error:t=>{console.log(t)}}),this.allProductSub=this._ProductsService.getAllProducts().subscribe({next:t=>{this.productsList.set(t.data)},error:t=>{console.log(t)}}),this._WishlistService.getUserWishList().subscribe({next:t=>{this.wishData.set(t.data.map(e=>e._id))}})}ngOnDestroy(){this.allProductSub?.unsubscribe}addCart(t){this._CartService.addProductToCart(t).subscribe({next:e=>{console.log(e),this._ToastrService.success(e.message,"FreshCart",{timeOut:2e3}),this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}addWish(t){this._WishlistService.addProductToWishList(t).subscribe({next:e=>{console.log(e),this.wishData.set(e.data),console.log(e.data)}})}deleteProduct(t){this._WishlistService.removeFromWishlist(t).subscribe({next:e=>{this.wishData.set(e.data)}})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=T({type:o,selectors:[["app-product"]],standalone:!0,features:[V],decls:9,vars:4,consts:[[1,"mb-4"],[1,"container"],[1,"py-3","mt-5"],["type","search","placeholder","search by name...",1,"form-control","w-50","m-auto","my-3",3,"ngModelChange","ngModel"],[1,"row","g-2"],[1,"col-lg-2","col-md-3","col-6","position-relative"],[1,"hear-Fav","position-absolute"],[1,"fa-regular","cr","fa-heart","cr"],[1,"fa-solid","cr","text-danger","fa-heart","cr"],[1,"product","p-2"],[1,"re-size",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,""],[1,"m-screen"],[1,"fs-6"],[1,"d-flex"],[1,"text-muted"],[1,"btn-main","w-100",3,"click"],[1,"fa-regular","cr","fa-heart","cr",3,"click"],[1,"fa-solid","cr","text-danger","fa-heart","cr",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star-half-stroke","rating-color"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"h2",2),d(3," All Products "),a(),n(4,"input",3),D("ngModelChange",function(x){return A(s.wordSearch,x)||(s.wordSearch=x),x}),a(),n(5,"div",4),P(6,ie,23,16,"div",5,K),y(8,"search"),a()()()),e&2&&(c(4),W("ngModel",s.wordSearch),c(2),b(F(8,1,s.productsList(),s.wordSearch)))},dependencies:[R,j,U,G,$,I,z],styles:["@media only screen and (min-width: 990px) and (max-width: 1041px){[class*=col-][_ngcontent-%COMP%]{width:20%}}.re-size[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px}.hear-Fav[_ngcontent-%COMP%]{top:5px;right:15px;font-size:20px}"]});let i=o;return i})();export{fe as ProductComponent};
