import './polyfills.server.mjs';
import{a as k}from"./chunk-7SVESCZ2.mjs";import{a as S,b as m,c as V,d as E,f as F,g as T,h as N,i as G,k as A}from"./chunk-TSF7LSXQ.mjs";import"./chunk-BH3MSCPX.mjs";import{k as P}from"./chunk-LVNVX3KP.mjs";import"./chunk-B6XCLQHU.mjs";import{Ab as a,Hb as l,Ob as b,Qa as d,Y as g,aa as x,gb as h,ib as u,ka as p,la as f,lb as y,mb as v,qb as n,rb as r,sb as c,vb as _,zb as w}from"./chunk-HHRL5WPK.mjs";import"./chunk-VVCT4QZE.mjs";function B(o,s){if(o&1){let t=_();n(0,"form",2),w("ngSubmit",function(){p(t);let i=a();return f(i.sendEmail())}),n(1,"div",3)(2,"label",4),l(3,"email"),r(),c(4,"input",5),r(),n(5,"button",6),l(6,"VerifyEmail"),r()()}if(o&2){let t=a();u("formGroup",t.verifyEmail),d(5),u("disabled",t.verifyEmail.invalid)}}function D(o,s){if(o&1){let t=_();n(0,"form",7),w("ngSubmit",function(){p(t);let i=a();return f(i.sendVerifyCode())}),n(1,"div",3)(2,"label",8),l(3,"VerifyCode"),r(),c(4,"input",9),r(),n(5,"button",6),l(6,"VerifyCode"),r()()}if(o&2){let t=a();u("formGroup",t.verifyCode),d(5),u("disabled",t.verifyCode.invalid)}}function M(o,s){if(o&1){let t=_();n(0,"button",15),w("click",function(){p(t);let i=a(2);return f(i.togglePasswordVisibility())}),c(1,"i"),r()}if(o&2){let t=a(2);d(),y(t.isPasswordVisible?"fa-solid fa-eye":"fa fa-eye-slash")}}function R(o,s){if(o&1){let t=_();n(0,"form",7),w("ngSubmit",function(){p(t);let i=a();return f(i.restPassword())}),n(1,"div",3)(2,"label",4),l(3,"email"),r(),c(4,"input",10),n(5,"div",11)(6,"label",12),l(7,"resetPassword"),r(),c(8,"input",13),h(9,M,2,2,"button",14),r()(),n(10,"button",6),l(11,"resetPassword"),r()()}if(o&2){let t,e=a();u("formGroup",e.resetPassword),d(8),u("type",e.isPasswordVisible?"text":"password"),d(),v(9,(t=e.resetPassword.get("newPassword"))!=null&&t.dirty?9:-1),d(),u("disabled",e.resetPassword.invalid)}}var J=(()=>{let s=class s{constructor(){this._FormBuilder=g(G),this._AuthService=g(k),this._Router=g(P),this.isPasswordVisible=!1,this.step=1,this.verifyEmail=this._FormBuilder.group({email:[null,[m.required,m.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[m.required,m.pattern(/^[0-9]{6,}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[m.required,m.email]],newPassword:[null,[m.required,m.pattern(/^\w{6,}$/)]]})}togglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible}sendEmail(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.setVerifyEmail(this.verifyEmail.value).subscribe({next:i=>{console.log(i),i.statusMsg=="success"&&(this.step=2)},error:i=>{console.log(i)}})}sendVerifyCode(){this._AuthService.setVerifyCode(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status=="Success"&&(this.step=3)},error:e=>{console.log(e)}})}restPassword(){this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("UserToken",e.token),this._AuthService.saveUserData,this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=x({type:s,selectors:[["app-forgot-password"]],standalone:!0,features:[b],decls:6,vars:1,consts:[[1,"h2","text-main","text-center"],[1,"bg-main-light","shadow","p-2","my-2","rounded-4",3,"formGroup"],[1,"bg-main-light","shadow","p-2","my-2","rounded-4",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"btn-main",3,"disabled"],[3,"ngSubmit","formGroup"],["for","code"],["formControlName","resetCode","id","code","type","text",1,"form-control"],["readonly","","formControlName","email","id","email","type","email",1,"form-control"],[1,"position-relative"],["for","resetPassword"],["id","resetPassword","formControlName","newPassword",1,"form-control","password-input",3,"type"],[1,"eye-icon"],[1,"eye-icon",3,"click"]],template:function(i,C){i&1&&(n(0,"section")(1,"h1",0),l(2,"Forgot Password:"),r(),h(3,B,7,2,"form",1)(4,D,7,2)(5,R,12,4),r()),i&2&&(d(3),v(3,C.step==1?3:C.step==2?4:C.step==3?5:-1))},dependencies:[A,F,S,V,E,T,N]});let o=s;return o})();export{J as ForgotPasswordComponent};
