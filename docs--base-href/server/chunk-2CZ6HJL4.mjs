import './polyfills.server.mjs';
import{a as O}from"./chunk-BFNV2WA3.mjs";import"./chunk-BH3MSCPX.mjs";import{k as F,l as V}from"./chunk-LVNVX3KP.mjs";import{o as T}from"./chunk-B6XCLQHU.mjs";import{Ab as _,Hb as a,Ib as x,Jb as g,Ma as b,Ob as P,Qa as s,Qb as E,Ub as v,Wb as h,Y as C,aa as S,ab as k,ib as f,ka as p,la as u,ob as y,pb as I,qb as n,rb as r,sb as m,vb as w,zb as d}from"./chunk-HHRL5WPK.mjs";import"./chunk-VVCT4QZE.mjs";var $=(c,o)=>o.product.id,B=c=>["/order",c];function D(c,o){if(c&1){let l=w();n(0,"div",9)(1,"div",10),m(2,"img",11),r(),n(3,"div",12)(4,"div")(5,"h3",13),a(6),r(),n(7,"p",14),a(8),v(9,"currency"),r(),n(10,"span",15),d("click",function(){let e=p(l).$implicit,i=_();return u(i.DeleteItem(e.product.id))}),m(11,"i",16),n(12,"a"),a(13,"Remove"),r()()(),n(14,"div",17)(15,"span",18),d("click",function(){let e=p(l).$implicit,i=_();return u(i.updateProductCount(e.product.id,e.count+1))}),m(16,"i",19),r(),n(17,"span",20),a(18),r(),n(19,"span",21),d("click",function(){let e=p(l).$implicit,i=_();return u(i.updateProductCount(e.product.id,e.count-1))}),m(20,"i",22),r()()()(),m(21,"hr")}if(c&2){let l=o.$implicit;s(2),f("src",l.product.imageCover,b)("alt",l.product.title),s(4),x(l.product.title),s(2),g("Price:",h(9,5,l.price,"GBP"),""),s(10),x(l.count)}}var z=(()=>{let o=class o{constructor(){this._CartService=C(O),this._Router=C(F),this.displayItem=k({})}ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{console.log(t.data),this.displayItem.set(t.data)},error:t=>{console.log(t)}})}DeleteItem(t){this._CartService.deleteProductCart(t).subscribe({next:e=>{console.log(e),this.displayItem.set(e.data),this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}goTOShopping(){this._Router.navigate(["/product"])}updateProductCount(t,e){e>=1&&this._CartService.updateProductCart(t,e).subscribe({next:i=>{console.log(i.data),this.displayItem.set(i.data)},error:i=>{console.log(i)}})}clearCart(){this._CartService.clearProductCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.displayItem.set({}),this._CartService.cartNumber.set(t.numOfCartItems))},error:t=>{console.log(t)}})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=S({type:o,selectors:[["app-cart"]],standalone:!0,features:[P],decls:19,vars:7,consts:[[1,"shadow","rounded-3","p-3","my-4","bg-main-light","w-75","m-auto"],[1,"container"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h2"],[1,"fa-solid","fa-cart-shopping","text-main"],[1,"text-main"],[1,"btn","btn-danger","p-2","my-2",3,"click"],[1,"text-center","cr",3,"click"],[1,"btn-main","mt-2",3,"routerLink"],[1,"row"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md","d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"m-1","text-main"],[1,"cr",3,"click"],[1,"fa-solid","fa-trash","text-danger","px-1"],[1,"d-flex","align-items-center","gap-2"],[1,"fs-5","border-1","rounded","text-main","cr",3,"click"],[1,"fa-solid","fa-plus-square"],[1,"fs-4"],[1,"fs-5","border-black","rounded","text-danger","cr",3,"click"],[1,"fa-solid","fa-minus-square"]],template:function(e,i){e&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),a(5," Shop Cart "),m(6,"i",4),r(),n(7,"p",5),a(8),v(9,"currency"),r()(),n(10,"button",6),d("click",function(){return i.clearCart()}),a(11,"Clear Cart"),r()(),y(12,D,22,8,null,null,$),n(14,"p",7),d("click",function(){return i.goTOShopping()}),a(15,"Shopping Now "),m(16,"i",4),r(),n(17,"button",8),a(18,"Order"),r()()()),e&2&&(s(8),g(" Total Cart Price : ",h(9,2,i.displayItem().totalCartPrice,"GBP")," "),s(4),I(i.displayItem().products),s(5),f("routerLink",E(5,B,i.displayItem()._id)))},dependencies:[T,V]});let c=o;return c})();export{z as CartComponent};
